<div class="max-w-full mx-auto">
  <app-filter (filterEvent)="submit($event)" (resetEvent)="reset($event)"></app-filter>

  <div>
    <div class="flex flex-col my-2 space-y-2 md:grid md:grid-cols-3 md:space-y-0 md:space-x-4">
      <div class="statsCard">
        <span *ngIf="!isLoading" class="stats">
          <animated-digit [digit]="numberOfRegisteredEntities"  [duration]="1000">
            {{numberOfRegisteredEntities | numberSuffix: 0 }}
          </animated-digit>
        </span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Registered Entities</span>
      </div>

      <div class="statsCard">
        <span *ngIf="!isLoading" class="stats">
          <animated-digit [digit]="numberOfPlannedContracts" [duration]="1000">
            {{ numberOfPlannedContracts | numberSuffix: 0 }}
            </animated-digit>
          </span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Plan Items</span>
      </div>

      <div class="statsCard">
        <span *ngIf="!isLoading" class="stats flex flex-row">
          UGX &nbsp;<animated-digit [digit]="totalValueofPlannedContracts" [duration]="1000">
             {{ totalValueofPlannedContracts | numberSuffix:1 }}
            </animated-digit></span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Estimated Amount</span>
      </div>



    </div>
  </div>

  <!-- Graphs -->
  <div>
    <!-- Percentage Plan and Budget Status -->
    <div
      class="grid grid-cols-1 mt-5 overflow-hidden bg-white divide-y divide-gray-200 rounded-lg shadow md:grid-cols-2 md:divide-y-0">
      <!-- Semi Circle -->
      <div class="px-4 py-5 sm:p-6 min-w-1/2">
        <apx-chart *ngIf="chartOptionsFinancialYearBudget?.series && !isLoadingBudgetSummary"
          [series]="chartOptionsFinancialYearBudget.series"
          [chart]="chartOptionsFinancialYearBudget.chart"
          [plotOptions]="chartOptionsFinancialYearBudget.plotOptions"
          [labels]="chartOptionsFinancialYearBudget.labels"
          [fill]="chartOptionsFinancialYearBudget.fill"
          [title]="chartOptionsFinancialYearBudget.title"
          [noData]="chartOptionsFinancialYearBudget.noData">
        </apx-chart>

        <div *ngIf="isLoadingBudgetSummary">
          <app-loader></app-loader>
        </div>
      </div>

      <!-- Bar -->
      <div class="px-4 py-5 sm:p-6 min-w-1/2">
        <div>
          <apx-chart *ngIf="chartOptionsPlannedVsSpent?.series && !isLoadingBudgetSummary"
            [series]="chartOptionsPlannedVsSpent.series"
            [chart]="chartOptionsPlannedVsSpent.chart"
            [dataLabels]="chartOptionsPlannedVsSpent.dataLabels"
            [plotOptions]="chartOptionsPlannedVsSpent.plotOptions"
            [responsive]="chartOptionsPlannedVsSpent.responsive"
            [xaxis]="chartOptionsPlannedVsSpent.xaxis"
            [yaxis]="chartOptionsPlannedVsSpent.yaxis"
            [legend]="chartOptionsPlannedVsSpent.legend"
            [fill]="chartOptionsPlannedVsSpent.fill"
            [tooltip]="chartOptionsPlannedVsSpent.tooltip"
            [title]="chartOptionsPlannedVsSpent.title"
            [labels]="chartOptionsPlannedVsSpent.labels"
            [noData]="chartOptionsPlannedVsSpent.noData">
          </apx-chart>

          <div *ngIf="isLoadingBudgetSummary">
            <app-loader></app-loader>
          </div>
        </div>
      </div>
    </div>

    <div
      class="grid grid-cols-1 mt-5 overflow-hidden bg-white divide-y divide-gray-200 rounded-lg shadow md:grid-cols-2 md:divide-y-0">
      <div class="px-4 py-5 sm:p-6 min-w-1/2">
        <apx-chart *ngIf="chartOptionsType?.series && !isLoadingTypeSummary" [series]="chartOptionsType.series"
          [chart]="chartOptionsType.chart" [labels]="chartOptionsType.labels" [responsive]="chartOptionsType.responsive"
          [title]="chartOptionsType.title" [plotOptions]="chartOptionsType.plotOptions"
          [tooltip]="chartOptionsType.tooltip" [legend]="chartOptionsType.legend" [noData]="chartOptionsType.noData">
        </apx-chart>
        <div *ngIf="isLoadingTypeSummary">
          <app-loader></app-loader>
        </div>
      </div>
      <div class="px-4 py-5 sm:p-6 min-w-1/2">
        <apx-chart *ngIf="chartOptionsMethod?.series && !isLoadingMethodSummary"
          [series]="chartOptionsMethod.series"
          [chart]="chartOptionsMethod.chart"
          [xaxis]="chartOptionsMethod.xaxis"
          [title]="chartOptionsMethod.title"
          [responsive]="chartOptionsMethod.responsive"
          [tooltip]="chartOptionsMethod.tooltip"
          [noData]="chartOptionsMethod.noData"></apx-chart>
        <div *ngIf="isLoadingMethodSummary">
          <app-loader></app-loader>
        </div>
      </div>
    </div>

    <!-- Row 1 -->
    <div class="mt-4 mb-4">
      <div class="flex flex-col space-y-4 md:grid md:grid-cols-1 md:space-y-0 md:space-x-4 ">
        <div class="flex flex-col sm:space-y-4 md:space-y-0 md:flex-row md:space-x-4 w-full ">
          <div id="chartBudgetStatus" class="md:w-3/4 w-full p-5 overflow-hidden bg-white rounded-lg shadow">
            <apx-chart *ngIf="chartOptionsBudgetStatus.series && !isLoading"    #chartBudgetStatus
              [series]="chartOptionsBudgetStatus.series"
              [chart]="chartOptionsBudgetStatus.chart"
              [dataLabels]="chartOptionsBudgetStatus.dataLabels"
              [plotOptions]="chartOptionsBudgetStatus.plotOptions"
              [title]="chartOptionsBudgetStatus.title"
              [legend]="chartOptionsBudgetStatus.legend"
              [tooltip]="chartOptionsBudgetStatus.tooltip"
              [noData]="chartOptionsBudgetStatus.noData"
              [stroke]="chartOptionsBudgetStatus.stroke"
              [labels]="chartOptionsBudgetStatus.labels">
            </apx-chart>
            <div *ngIf="isLoading">
              <app-loader></app-loader>
            </div>
          </div>
          <div class="md:w-1/4 flex flex-row space-x-4 w-full md:space-x-0 md:space-y-4 sm:space-y-0  md:grid md:grid-cols-1  ">
            <div class="w-full flex flex-col items-center overflow-hidden p-5 bg-white rounded-lg shadow">
              <div *ngIf="!isLoading" class="flex flex-col items-center">
                <span
                  class="text-sm  md:text-base font-bold text-gray-700 text-center flex mb-8">
                  Highest Budget Amount Planned
                </span>
                <span class="text-2xl md:text-4xl text-gray-700 font-normal text-center flex mb-2">UGX
                  {{ highestContractValue | numberSuffix }}
                </span>
                <span
                  class="text-sm  md:text-sm font-bold text-gray-500 text-center flex">{{ entityWithHighestProcurement }}
                </span>
              </div>
              <span *ngIf="isLoading">
                <app-loading-pulse></app-loading-pulse>
              </span>
            </div>

            <div class="w-full flex flex-col items-center overflow-hidden p-5 bg-white rounded-lg shadow">
              <div *ngIf="!isLoading" class="flex flex-col items-center">
                <span
                  class="text-sm  md:text-base font-bold text-gray-700 text-center flex mb-8">Highest Budget V Planned
                </span>
                <span class="text-2xl md:text-4xl text-gray-700 font-normal text-center flex mb-2">
                  {{ highestPercentage | numberSuffix }}%
                </span>
                <span
                  class="text-sm  md:text-sm font-bold text-gray-500 text-center flex">
                  {{ entityWithHighestProcurement }}
                </span>
              </div>
              <span *ngIf="isLoading">
                <app-loading-pulse></app-loading-pulse>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
