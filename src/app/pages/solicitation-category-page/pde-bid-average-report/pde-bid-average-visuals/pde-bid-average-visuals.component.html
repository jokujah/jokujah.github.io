<div class="max-w-full mx-auto">
  <app-filter (filterEvent)="submit($event)" (resetEvent)="reset($event)"></app-filter>

  <div class="mt-4">
    <div class="hidden md:grid md:grid-cols-3 md:space-y-0 md:space-x-4">
      <div class="statsCard" 
      matTooltipClass = "statsToolTip" 
      matTooltip="{{cardValue1 |convertNumbersWithCommas}}"  
      matTooltipPosition="above">
        <span *ngIf="!isLoading" class="stats">
          <animated-digit [digit]="cardValue1" [duration]="1000">
            {{ cardValue1 | numberSuffix: 1 }}
          </animated-digit>
        </span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Bids</span>
      </div>
      <div class="statsCard" 
      matTooltipClass = "statsToolTip" 
      matTooltip="{{cardValue2 |convertNumbersWithCommas}}"  
      matTooltipPosition="above">
        <span *ngIf="!isLoading" class="stats">
          <animated-digit [digit]="cardValue2" [duration]="1000">
            {{ cardValue2 | numberSuffix: 1 }}
          </animated-digit>
        </span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Bids Responded To</span>
      </div>

      <!-- <div class="statsCard" 
      matTooltipClass = "statsToolTip" 
      matTooltip="{{cardValue4 |convertNumbersWithCommas}}"  
      matTooltipPosition="above">
        <span *ngIf="!isLoading" class="stats flex flex-row">
          <animated-digit [digit]="cardValue4" [duration]="1000">
             {{ cardValue4 | numberSuffix:1 }}
            </animated-digit></span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Bids Responses</span>
      </div> -->

      <div class="statsCard" 
      matTooltipClass = "statsToolTip" 
      matTooltip="{{cardValue3 |convertNumbersWithCommas}}"  
      matTooltipPosition="above">
        <span *ngIf="!isLoading" class="stats flex flex-row">
         <animated-digit [digit]="cardValue3" [duration]="1000">
             {{ cardValue3 | numberSuffix:1 }}
            </animated-digit></span>
        <span *ngIf="isLoading">
          <app-loading-pulse></app-loading-pulse>
        </span>
        <span class="statsText">Responding Providers</span>
      </div>
    </div>

    <!-- Mobile -->
    <div class="md:hidden flex flex-col my-2 space-y-4">
      <div class="grid grid-cols-2 space-x-4">
        <div #tooltip1="matTooltip" 
        class="statsCard" 
        matTooltipClass = "statsToolTip" 
        matTooltip="{{cardValue1 | convertNumbersWithCommas}}"  
        matTooltipPosition="above" (click)="tooltip1.toggle()">
          <span *ngIf="!isLoading" class="stats">
            <animated-digit [digit]="cardValue1" [duration]="1000">
              {{ cardValue1 | numberSuffix: 2 }}
            </animated-digit>
          </span>
          <span *ngIf="isLoading">
            <app-loading-pulse></app-loading-pulse>
          </span>
          <span class="statsText">Bids</span>
        </div>
        <div #tooltip2="matTooltip" 
        class="statsCard" 
        matTooltipClass = "statsToolTip" 
        matTooltip="{{cardValue2 | convertNumbersWithCommas}}"  
        matTooltipPosition="above" (click)="tooltip2.toggle()">
          <span *ngIf="!isLoading" class="stats">
            <animated-digit [digit]="cardValue2" [duration]="1000">
              {{ cardValue2 | numberSuffix: 2 }}
            </animated-digit>
          </span>
          <span *ngIf="isLoading">
            <app-loading-pulse></app-loading-pulse>
          </span>
          <span class="statsText">Bids Responded To</span>
        </div>
      </div>
      <div class="grid grid-cols-1 space-x-4">
        <!-- <div #tooltip3="matTooltip" 
        class="statsCard" 
        matTooltipClass = "statsToolTip" 
        matTooltip="{{cardValue4 | convertNumbersWithCommas}}"  
        matTooltipPosition="above" (click)="tooltip3.toggle()">
          <span *ngIf="!isLoading" class="stats flex flex-row">
            <animated-digit [digit]="cardValue4" [duration]="1000">
               {{ cardValue4 | numberSuffix:2 }}
              </animated-digit></span>
          <span *ngIf="isLoading">
            <app-loading-pulse></app-loading-pulse>
          </span>
          <span class="statsText">Bids Responses</span>
        </div> -->
  
        <div #tooltip4="matTooltip" 
        class="statsCard" 
        matTooltipClass = "statsToolTip" 
        matTooltip="{{cardValue3 | convertNumbersWithCommas}}"  
        matTooltipPosition="above" (click)="tooltip4.toggle()">
          <span *ngIf="!isLoading" class="stats flex flex-row">
            <animated-digit [digit]="cardValue3" [duration]="1000">
               {{ cardValue3 | numberSuffix:2 }}
              </animated-digit></span>
          <span *ngIf="isLoading">
            <app-loading-pulse></app-loading-pulse>
          </span>
          <span class="statsText">Responding Providers</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Graphs -->
  <div>
    <div>
      <div class="mt-4 mb-4">
        <div class="flex flex-col md:space-x-4 space-y-4 md:space-y-0 md:flex-row w-full">         
          <div class=" w-full  p-5 bg-white shadow rounded-lg overflow-hidden">
            <div *ngIf="!isLoading">
              <div class="font-bold mb-4 text-center">Highest Number Of Bids Published </div>
              <div *ngIf="topTenHighestContracts.length > 0" class="inline-block min-w-full align-middle ">
                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                  <table #myTable2 id="myTable2" class="min-w-full divide-y divide-gray-300 table-auto">
                    <thead class="bg-gray-50">
                      <tr>
                        <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">PDE
                        </th>                      
                        <th scope="col"
                          class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 cursor-pointer">
                          <span class="group inline-flex">
                            Bids                           
                          </span>
                        </th> 
                        <!-- <th scope="col"
                          class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 cursor-pointer">
                          <span class="group inline-flex">
                            Number of Bids Responded To                           
                          </span>
                        </th>  -->
                        <th scope="col"
                          class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 cursor-pointer">
                          <span class="group inline-flex">
                            Responding Providers                      
                          </span>
                        </th>                                         
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                      <tr *ngFor="let item of topTenHighestContracts">
                        <td class="whitespace-normal py-2 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6">
                          <div class="flex flex-col items-left">
                            <span class="text-xs font-medium text-gray-900">{{item?.entity ? item?.entity : 'Unknown'}}</span>
                          </div>
                        </td>
                        <td class="whitespace-normal px-3 py-2 text-sm text-gray-500">{{item?.numberOfBids}}</td>
                        <!-- <td class="whitespace-normal px-3 py-2 text-sm text-gray-500">{{item?.numberOfBidsRespondedTo}}</td> -->
                        <td class="whitespace-normal px-3 py-2 text-sm text-gray-500">{{item?.numberOfProvidersThatResponded}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <span *ngIf="!topTenHighestContracts || topTenHighestContracts.length <= 0">
                <app-empty-state></app-empty-state>
              </span>
            </div>
            <span *ngIf="isLoading">
              <app-loader></app-loader>
            </span>
           
          </div>
          
          <!-- <div class="md:w-1/4 flex flex-row sm:space-y-0 sm:place-content-between space-x-4 md:space-x-0 md:space-y-4  md:grid md:grid-cols-1 md:content-start ">            
            <div class="overflow-hidden p-5 bg-white rounded-lg shadow w-full">
              <div *ngIf="!isLoading && topTenHighestContracts.length > 0" class="flex flex-col items-center">
                <span class="text-sm  md:text-base font-bold text-gray-500 text-center flex mb-8">Highest Number of Published Bids</span>
                <span class="text-2xl md:text-4xl text-gray-700 font-normal text-center flex mb-2"> {{ highestNumberOfPublishedBids }}</span>
                <span class="text-sm  md:text-sm font-bold text-gray-600 text-center flex">{{ topTenHighestContracts[0]?.entity }}</span>
              </div>
              <span *ngIf="isLoading">
                <app-loader></app-loader>
              </span>  
              <span *ngIf="!isLoading && ( !topTenHighestContracts || topTenHighestContracts.length <= 0  )">
                <app-empty-state></app-empty-state>
              </span>   
            </div>                
          </div> -->
        </div>
      </div>
    </div>
    
    <div  class="mt-4 mb-4 invisible md:visible">
      <div>
        <div class="flex flex-col w-full p-5 overflow-hidden bg-white rounded-lg shadow">
          <div *ngIf="!isLoading && chartOptionsInitiatedVPublished">
            <div id="chartInitiatedVPublished">
              <apx-chart [series]="chartOptionsInitiatedVPublished.series" [chart]="chartOptionsInitiatedVPublished.chart"
                [dataLabels]="chartOptionsInitiatedVPublished.dataLabels" [stroke]="chartOptionsInitiatedVPublished.stroke"
                [colors]="chartOptionsInitiatedVPublished.colors" [title]="chartOptionsInitiatedVPublished.title"
                [grid]="chartOptionsInitiatedVPublished.grid" [tooltip]="chartOptionsInitiatedVPublished.tooltip"
                [plotOptions]="chartOptionsInitiatedVPublished.plotOptions" [yaxis]="chartOptionsInitiatedVPublished.yaxis"
                [xaxis]="chartOptionsInitiatedVPublished.xaxis" [noData]="chartOptionsInitiatedVPublished.noData">
              </apx-chart>
            </div>
          </div>
          <div *ngIf="isLoading">
            <app-loader></app-loader>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Row 1 -->
    <div class="mt-4 mb-4">     
      <div>
        <div class="flex flex-col w-full p-5 overflow-hidden bg-white rounded-lg shadow">
          <div *ngIf="!isLoadingBidsSummary">
            <!-- <div class="flex justify-center font-bold text-[18px] text-[#000000] text-opacity-[1]">
             Bid Average By Procurement Method
            </div> -->
            <div class="px-4 mt-8" *ngIf="averageBidsData.length > 0">
              <apx-chart *ngIf="optionsProgress?.title.text !== 'Unknown'" [series]="optionsProgress.series"
                [chart]="optionsProgress.chart" [dataLabels]="optionsProgress.dataLabels"
                [plotOptions]="optionsProgress.plotOptions" [yaxis]="optionsProgress.yaxis" [legend]="optionsProgress.legend"
                [fill]="optionsProgress.fill" [stroke]="optionsProgress.stroke" [tooltip]="optionsProgress.tooltip"
                [xaxis]="optionsProgress.xaxis" [title]="optionsProgress.title" [subtitle]="optionsProgress.subtitle" [responsive]="optionsProgress.responsive"
                [noData]="optionsProgress.noData">
              </apx-chart>
            </div>
            <div *ngIf="!averageBidsData || averageBidsData.length <= 0">
              <app-empty-state></app-empty-state>
            </div>
          </div>
          <div *ngIf="isLoadingBidsSummary">
            <app-loader></app-loader>
          </div>          
        </div>
      </div>
    </div>

    <!-- <div>
      <div class="mt-4 mb-4">
        <div class="flex flex-col md:space-x-4 space-y-4 md:space-y-0 md:flex-row w-full">         
          <div class="md:w-3/4 w-full  p-5 bg-white shadow rounded-lg overflow-hidden">
            <div>
              <div class="font-bold mb-4">Bids By Procurement Method</div>
              <div *ngIf="!isLoading && averageBidsByMethod.length > 0" class="inline-block min-w-full align-middle ">
                <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                  <table #myTable2 id="myTable2" class="min-w-full divide-y divide-gray-300 table-auto">
                    <thead class="bg-gray-50">
                      <tr>
                        <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6">Procurement Method
                        </th>                      
                        <th scope="col"
                          class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 cursor-pointer">
                          <span class="group inline-flex">
                            Published Bids                          
                          </span>
                        </th>
                        <th scope="col"
                          class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900 cursor-pointer">
                          <span class="group inline-flex">
                            Bids Responded To                          
                          </span>
                        </th>                                          
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                      <tr *ngFor="let item of averageBidsByMethod">
                        <td class="whitespace-normal py-2 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6">
                          <div class="flex flex-col items-left">
                            <span class="text-xs font-medium text-gray-900">{{item?.procurementMethod ? item?.procurementMethod : 'Unknown'}}</span>
                          </div>
                        </td>
                        <td class="whitespace-normal px-3 py-2 text-sm text-gray-500">{{item?.numberOfPublishedBids}}</td>
                        <td class="whitespace-normal px-3 py-2 text-sm text-gray-500">{{item?.numberOfBidsRespondedTo}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <span *ngIf="isLoading">
              <app-loader></app-loader>
            </span>
            <span *ngIf="!isLoading &&(!averageBidsByMethod || averageBidsByMethod.length <= 0)">
              <app-empty-state></app-empty-state>
            </span>
          </div>
          
          <div class="md:w-1/4 flex flex-row sm:space-y-0 sm:place-content-between space-x-4 md:space-x-0 md:space-y-4  md:grid md:grid-cols-1 md:content-start ">            
            <div  class="overflow-hidden p-5 bg-white rounded-lg shadow w-full">
              <div  *ngIf="!isLoading && averageBidsByMethod.length > 0" class="flex flex-col items-center">
                <span class="text-sm  md:text-base font-bold text-gray-500 text-center flex mb-8">Highest Number Of Published Bids</span>
                <span class="text-2xl md:text-4xl text-gray-700 font-normal text-center flex mb-2">{{averageBidsByMethod[0]?.numberOfPublishedBids}}</span>
                <span class="text-sm  md:text-sm font-bold text-gray-500 text-center flex">
                  {{
                  (averageBidsByMethod[0]?.procurementMethod)
                  ? (averageBidsByMethod[0]?.procurementMethod) : 'Unknown'
                  }}</span>
              </div>
              <span *ngIf="isLoading">
                <app-loader></app-loader>
              </span> 
              <span *ngIf="!isLoading && (!averageBidsByMethod || averageBidsByMethod.length <= 0)">
                <app-empty-state></app-empty-state>
              </span> 
            </div>                   
          </div>
        </div>
      </div>
    </div> -->
  </div>




</div>